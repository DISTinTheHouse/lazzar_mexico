{% extends 'layouts/layout.html' %}
{% block title %}
    {{title}}
{% endblock %}
{% block content %}

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SP1MJ3P87D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SP1MJ3P87D');
</script>

<style>
  .icon-above-text {
    align-items: center; 
    text-align: center; 
  }

  .icon-above-text .material-icons {
    margin-bottom: 3px; 
  }
  .btn {
    display: flex;
    align-items: center;
  }
      
  .material-icons-round {
    margin-right: 5px;
  }
</style>
<h1 class="text-center display-1 fw-bold title" style="background-color: #2586a6; color: #f8f7f6; font-weight: bold; text-shadow: 3px 3px 4px rgba(0, 0, 0, 0.7); padding: 5px;">Cedicor</h1>
<p class="display-4 text-left fw-bold text-center title subtitulos" style=" color: #a71930; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3); padding: 15px; background: linear-gradient(to bottom, #2586a6, #f8f7f6);">Stock</p>

<main class="container-fluid">

<section class="containter-fluid" style="display: flex; justify-content: center; align-items: center; padding: 25px;">
  <ul class="nav nav-tabs flex-column flex-sm-row mx-auto" id="ex-with-icons" role="tablist">
    <li class="nav-item" role="presentation">
         <a class="nav-link " aria-current="page" href="http://bodegalazzar.ddns.net:3000/envios" style="color: #6c8ead; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
           <div class="d-flex flex-column icon-above-text">
             <span class="material-symbols-outlined" style="font-size: 35px;">local_shipping</span>
             Rastreo Lazzar
           </div>
         </a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" href="{% url 'stock_alm' %}" style="color: #566573; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">edit_square</span>
          Stock
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " aria-current="page" href="{% url 'ordenes_e' %}" style="color: #16A085; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">package_2</span>
           Ordenes + E 
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " aria-current="page" href="{% url 'pedidos_pq' %}" style="color: #a71930; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;" >
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">package</span>
          Pedidos PQ
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " aria-current="page" href="{% url 'pedidos_q' %}" style="color: #D4AC0D; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;" >
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">inbox_customize</span>
          Pedidos Q
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{% url 'orden_e_vencido' %}" style="color: #ff3c38; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;" >
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">remove_done</span>
          Orden E Vencidos
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link " download="Existencias.xlsx" aria-current="page" href="https://www.lazzarmexico.com/archivos/existencias/Existencias_Lazzar.xlsx" style="color: #00a9db; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size:16px"> 
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">download</span>
          Existencias
        </div>
      </a>
    </li>
    <!--<li class="nav-item">
      <a class="nav-link " aria-current="page" href="{% url 'pedidos_q' %}" style="color: #D4AC0D; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1);">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-outlined">inbox_customize</span>
          Pedidos + Q
        </div>
      </a>
    </li>-->
  </ul>
</section>
</main>

<div class="d-flex justify-content-center align-items-center mb-2">
  <div class="me-3 border p-3">
      <form class="d-flex flex-column align-items-center" role="search" action="{% url 'search_e' %}" method="POST" target="_blank">
          {% csrf_token %}
          <input class="form-control me-2 titulos mb-2" type="text" placeholder="Buscar Orden E..." aria-label="Search" name="encontrar_e">
          <button class="btn btn-success titulos" type="submit button">Buscar E</button>
      </form>
  </div>

  <div class="me-3 border p-3">
      <form class="d-flex flex-column align-items-center" role="search" action="{% url 'search_pq' %}" method="POST" target="_blank">
          {% csrf_token %}
          <input class="form-control me-2 titulos mb-2" type="text" placeholder="Buscar Pedido PQ..." aria-label="Search" name="encontrar_pq">
          <button class="btn btn-danger titulos" type="submit button">Buscar PQ</button>
      </form>
  </div>

  <div class="border p-3">
      <form class="d-flex flex-column align-items-center" role="search" action="{% url 'search_q' %}" method="POST" target="_blank">
          {% csrf_token %}
          <input class="form-control me-2 titulos mb-2" type="text" placeholder="Buscar pedido Q..." aria-label="Search" name="encontrar_p">
          <button class="btn btn-warning titulos" type="submit button">Buscar Q</button>
      </form>
  </div>
</div>

<div class="row justify-content-center" style="padding: 30px;"> <!-- Se reemplazo box -->
    <div class="col-md-4 col-lg-4 mt-3 text-center" style="border:solid 9px #a5acaf; padding: 15px; border-radius: 30px; box-shadow:0 10px 20px rgba(0, 0, 0, 0.5);">

        <form action="{% url 'stock_alm' %}" method="POST" class="card card-body text-center mt-5" style="border:solid 6px #EAECEE; border-radius: 30px; margin-bottom: 30px;">
            {% csrf_token %}
            <label for="almacen" style="color: #808B96;">Selecciona un Almacén:</label>
            <select class="form-select text-center mt-3" id="almacen" name="almacen" aria-label="Default select example" style="border:solid 3px #ABB2B9; padding: 5px; border-radius: 25px; color: #ABB2B9;">
                {% for codigo_almacen in almacenes %}
                    <option value="{{ codigo_almacen.cod_almacen }}">{{ codigo_almacen.nombre_almacen }}</option>
                {% endfor %}
            </select>            
            <button type="submit" class="btn btn-dark pd-3 justify-content-center mt-3" value="buscar" style="border-radius: 25px; box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2);">
                <span class="material-symbols-rounded">manage_search</span>
                BUSCAR
            </button>
        </form>

    </div>
</div>

{% if avios %}
<div class="d-flex justify-content-center align-items-center mt-3">
  <button onclick="window.location.href='{% url 'descargar_excel_avios' %}'" class="btn btn-success text-center" style="border-radius: 25px; font-weight: bold; height: 55px; width: 130px;">Descargar Excel Almacén 02</button>
</div>

<div class="form-outline mb-4 mt-5 container">
    <input type="text" class="form-control form-control-lg" id="datatable-search-input" placeholder="Buscar Consulta. . ." style="border:solid 6px #A9CCE3; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4); border-radius: 25px;"/>
    <label class="form-label" for="datatable-search-input"></label>
</div>

<div class="container-fluid">
    <div id="datatable-container mt-5" style="border:solid 8px #A9CCE3; border-radius: 25px; padding: 25px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);">
        <table class="table table-striped table-bordered mt-5" style="border:solid 10px #0B2265; border-radius: 20px;" id="datatable">
        <thead class="table" style="background-color: #C5CAE9;">
            <tr>
                <th class="text-center">CODIGO</th>
                <th class="text-center">DESCRIPCION</th>
                <th class="text-center">INVENTARIO</th>
            </tr>
        </thead>
        <tbody>
            {% for fila in resultados %}
                <tr>
                    <td class="text-center">{{ fila.0 }}</td>
                    <td class="text-center">{{ fila.1 }}</td>
                    <td class="text-center">{{ fila.2 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
<footer class=" text-center mt-4" style="background-color: #f2f2f2;">
  <div class="row">

    <section style="padding: 23px;" class="titulos">
      © 2023 Copyright:
      <a style="color: #B7950B; text-decoration:underline;" href="https://www.lazzarmexico.com/" class="titulos">Lazzarmexico.com</a>
      
    </section>

  <div class="text-center titulos p-4 larger-text" style="background-color: rgba(11, 34, 101); font-size: 18px; background: linear-gradient(to top, #0B2265, #2586a6);">
      <p style="color: azure;">
          Respeto, Honestidad, Confianza, Responsabilidad, Lealtad
      </p>
  </div>
</footer>
{% endif %}

 {% if resultados_eder %}
 <div class="form-outline mb-4 mt-5 container">
  <input type="text" class="form-control form-control-lg" id="datatable-search-input" placeholder="Buscar Consulta. . ." style="border:solid 6px #A9CCE3; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); border-radius: 25px;"/>
  <label class="form-label" for="datatable-search-input"></label>
</div>

<div class="container-fluid mt-5 mb-4">
  <div id="datatable-container mt-5" style="border:solid 8px #A9CCE3; border-radius: 25px; padding: 25px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);">
      <table class="table table-striped table-bordered mt-5" style="border:solid 10px #0B2265; border-radius: 20px;" id="datatable">
      <thead class="table" style="background-color: #C5CAE9;">
          <tr>
              <th class="text-center">CODIGO</th>
              <th class="text-center">DESCRIPCION</th>
              <th class="text-center">INVENTARIO</th>
          </tr>
      </thead>
      <tbody>
          {% for fila in resultados_eder %}
              <tr>
                  <td class="text-center">{{ fila.0 }}</td>
                  <td class="text-center">{{ fila.1 }}</td>
                  <td class="text-center">{{ fila.2 }}</td>
              </tr>
          {% endfor %}
      </tbody>
  </table>
</div>
</div>
<footer class=" text-center mt-4" style="background-color: #f2f2f2;">
<div class="row">

  <section style="padding: 23px;" class="titulos">
    © 2023 Copyright:
    <a style="color: #B7950B; text-decoration:underline;" href="https://www.lazzarmexico.com/" class="titulos">Lazzarmexico.com</a>
    
  </section>

<div class="text-center titulos p-4 larger-text" style="background-color: rgba(11, 34, 101); font-size: 18px; background: linear-gradient(to top, #0B2265, #2586a6);">
    <p style="color: azure;">
        Respeto, Honestidad, Confianza, Responsabilidad, Lealtad
    </p>
</div>
</footer>
{% endif %} 

{% if telas %}
<div class="d-flex justify-content-center align-items-center mt-3 ">
  <button onclick="window.location.href='{% url 'descargar_excel_04' %}'" class="btn btn-success text-center" style="border-radius: 25px; font-weight: bold; height: 55px; width: 130px;">Descargar Excel Almacén 04</button>
</div>

<div class="container">
<div class="form-outline mb-4 mt-5">
    <input type="text" class="form-control form-control-lg" id="datatable-search-input" placeholder="Buscar Consulta. . ." style="border:solid 6px #A9CCE3; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); border-radius: 25px;"/>
    <label class="form-label" for="datatable-search-input"></label>
</div>
</div>

<div class="container-fluid mt-5 mb-4">
<div id="datatable-container mt-5" style="border:solid 8px #A9CCE3; border-radius: 25px; padding: 25px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);">
    <table class="table table-striped table-bordered mt-5" style="border:solid 10px #0B2265; border-radius: 20px;" id="datatable">
        <thead class="table" style="background-color: #C5CAE9;">
            <tr>
                <th class="text-center" style="font-weight: bolder;">CODIGO</th>
                <th class="text-center" style="font-weight: bolder;">DESCRIPCION</th>
                <th class="text-center" style="font-weight: bolder;">FOLIO ROLLO</th>
                <th class="text-center" style="font-weight: bolder;">METROS</th>
                <th class="text-center" style="font-weight: bolder;">COMENTARIO TELA</th>
            </tr>
        </thead>
        <tbody>
            {% for fila in resultados_telas %}
                <tr>
                    <td class="text-center" style="font-weight: bold;">{{ fila.0 }}</td>
                    <td class="text-center" style="font-style: italic;">{{ fila.1 }}</td>
                    <td class="text-center" style="font-weight: bold;">{{ fila.2 }}</td>
                    <td class="text-center" style="font-style: italic;">{{ fila.3 }}</td>
                    <td class="text-center" style="font-style: italic;">{{ fila.4 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
<footer class=" text-center mt-4" style="background-color: #f2f2f2;">
  <div class="row">

    <section style="padding: 23px;" class="titulos">
      © 2023 Copyright:
      <a style="color: #B7950B; text-decoration:underline;" href="https://www.lazzarmexico.com/" class="titulos">Lazzarmexico.com</a>
      
    </section>

  <div class="text-center titulos p-4 larger-text" style="background-color: rgba(11, 34, 101); font-size: 18px; background: linear-gradient(to top, #0B2265, #2586a6);">
      <p style="color: azure;">
          Respeto, Honestidad, Confianza, Responsabilidad, Lealtad
      </p>
  </div>
</footer>
{% endif %}

{% if prod_term %}
<div class="form-outline mb-4 mt-5 container">
    <input type="text" class="form-control form-control-lg" id="datatable-search-input" placeholder="Buscar Consulta. . ." style="border:solid 6px #A9CCE3; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2); border-radius: 25px;"/>
    <label class="form-label" for="datatable-search-input"></label>
</div>

<div class="container-fluid mt-5 mb-4">
    <div id="datatable-container mt-5" style="border:solid 8px #A9CCE3; border-radius: 25px; padding: 25px; box-shadow: 0 10px 20px rgba(0, 0, 0, 0.5);">
        <table class="table table-striped table-bordered mt-5" style="border:solid 10px #0B2265; border-radius: 20px;" id="datatable">
        <thead class="table" style="background-color: #C5CAE9;">
            <tr>
                <th class="text-center">CODIGO</th>
                <th class="text-center">DESCRIPCION</th>
                <th class="text-center">INVENTARIO</th>
            </tr>
        </thead>
        <tbody>
            {% for fila in resultados_prod_terminado %}
                <tr>
                    <td class="text-center">{{ fila.0 }}</td>
                    <td class="text-center">{{ fila.1 }}</td>
                    <td class="text-center">{{ fila.2 }}</td>
                </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
</div>
<footer class=" text-center mt-4" style="background-color: #f2f2f2;">
  <div class="row">

    <section style="padding: 23px;" class="titulos">
      © 2023 Copyright:
      <a style="color: #B7950B; text-decoration:underline;" href="https://www.lazzarmexico.com/" class="titulos">Lazzarmexico.com</a>
      
    </section>

  <div class="text-center titulos p-4 larger-text" style="background-color: rgba(11, 34, 101); font-size: 18px; background: linear-gradient(to top, #0B2265, #2586a6);">
      <p style="color: azure;">
          Respeto, Honestidad, Confianza, Responsabilidad, Lealtad
      </p>
  </div>
</footer>
{% endif %}

</main>

<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#datatable-search-input').on('input', function() {
        var searchText = $(this).val().toLowerCase();
        $('#datatable tbody tr').each(function() {
          var rowText = $(this).text().toLowerCase();
          if (rowText.indexOf(searchText) === -1) {
            $(this).hide();
          } else {
            $(this).show();
          }
        });
      });
    });
  </script>

{% endblock %}