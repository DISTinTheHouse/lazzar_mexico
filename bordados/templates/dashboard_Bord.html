{% extends 'layouts/layout.html' %}
{% block title %}
    {{title}}
{% endblock %}
{% block content %}

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-SP1MJ3P87D"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SP1MJ3P87D');
</script>

<h1 class="text-center display-1 fw-bold title" style="background-color: #2586a6; color: #f8f7f6; font-weight: bold; text-shadow: 3px 3px 4px rgba(0, 0, 0, 0.7); padding: 5px;">Dashboard</h1>
<p class="display-4 text-left fw-bold text-center title subtitulos" style="color: #fccc0a; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.3); padding: 15px; background: linear-gradient(to bottom, #2586a6, #f8f7f6);">+</p>

<main class="container-fluid ">

<section class="container-fluid" style="display: flex; justify-content: center; align-items: center; padding: 25px">
  <ul class="nav nav-tabs flex-column flex-sm-row mx-auto" id="ex-with-icons" role="tablist">
    <li class="nav-item" role="presentation">
         <a class="nav-link " aria-current="page" href="http://bodegalazzar.ddns.net:3000/envios" style="color: #6c8ead; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
           <div class="d-flex flex-column icon-above-text">
             <span class="material-symbols-outlined" style="font-size: 35px;">local_shipping</span>
             Rastreo Lazzar
           </div>
         </a>
    </li>
    <li class="nav-item" role="presentation">
      <a class="nav-link" aria-current="page" href="{% url 'pendientes_folios' %}" style="color: #16A085; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">hourglass_bottom</span>
          Pendientes
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{% url 'entregados_folios' %}" style="color: #3498DB; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">verified</span>
          Entregados
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link active" aria-current="page" href="{% url 'dashboard_Bord' %}" style="color: #F1C40F; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.07); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">donut_small</span>
          Dashboard
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{% url 'buscar_ventas' %}" style="color: #E67E22; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">search</span>
          Buscar
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{% url 'pedidos_dia' %}" style="color: #82E0AA; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.08); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">today</span>
          Pedidos x día
        </div>
      </a>
    </li>
    <li class="nav-item">
      <a class="nav-link" aria-current="page" href="{% url 'historial' %}" style="color: #76448A; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;">
        <div class="d-flex flex-column icon-above-text">
          <span class="material-symbols-rounded" style="font-size: 35px;">deployed_code_history</span>
          Productividad
        </div>
      </a>
    </li>
    <li class="nav-item">
          <a class="nav-link " download="Existencias.xlsx" aria-current="page" href="https://www.lazzarmexico.com/archivos/existencias/Existencias_Lazzar.xlsx" style="color: #00a9db; font-weight: bold; text-shadow: 2px 2px 3px rgba(0, 0, 0, 0.1); font-size: 16px;"> 
            <div class="d-flex flex-column icon-above-text">
              <span class="material-symbols-rounded" style="font-size: 35px;">download</span>
              Existencias
            </div>
          </a>
    </li>
  </ul>
</section> 
<!-----------.....ESTILO ICONOS.....----------->
<style>
  .icon-above-text {
    align-items: center; 
    text-align: center; 
  }

  .icon-above-text .material-icons {
    margin-bottom: 3px; 
  }
</style>
<!-----------.....ESTILO ICONOS.....----------->
<table class="table table-striped table-bordered mx-auto">
  <thead class="thead-dark">
    <tr>
      <th scope="col" class="text-center">Pedidos Fecha Actual</th>
      <th scope="col" class="text-center">Pedidos Año Anterior</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      {% for item in result %}
      <td class="text-center">{{ item.1|floatformat:0 }}</td>
      <td class="text-center">{{ item.0|floatformat:0 }}</td>
      {% endfor %}
    </tr>
  </tbody>
</table>

<div style="width: 90%; margin: auto;" class="mt-5 mb-5">
  <canvas class="my-polar-chart"></canvas>
</div>

<div style="width: 80%; margin: auto;" class="mt-5 mb-5">
  <canvas class="my-bar-chart"></canvas>
</div>

<script>
  const labelsPolar = [
  {% for item in result %}
  "{{ last_year }}","{{ date_now }}"
  {% endfor %}
  ];
  const dataPolar = [
  {% for item in result %}
  {{ item.0|floatformat:0 }},{{ item.1|floatformat:0 }}
  {% endfor %}
  ];

  const polarConfig = {
    type: 'polarArea',
    data: {
      labels: labelsPolar,
      datasets: [{
        data: dataPolar,
        backgroundColor: [
          'rgba(75, 192, 192, 0.4)',
          'rgba(153, 102, 255, 0.4)',
        ],
        borderColor: [
          'rgb(75, 192, 192)',
          'rgb(153, 102, 255)',
        ],
        borderWidth: 1,
      }]
    },
    options: {
      responsive: true,
      scales: {
        r: {
          pointLabels: {
            display: true,
            centerPointLabels: true,
            font: {
              size: 25
            }
          }
        }
      },
      plugins: {
        legend: {
          position: 'top',
        },
        title: {
          display: true,
          text: 'Total De Ordenes por día, comparado al año:'
        }
      }
    },
  };

  const myPolarChart = new Chart(document.querySelector(".my-polar-chart"), polarConfig);

  document.addEventListener("DOMContentLoaded", function() {
    const etiquetas = [
        {% for item in resultado %}
        "{{ item.0 }}",
        {% endfor %}
    ];

    const datos = [
        {% for item in resultado %}
        {{ item.1|floatformat:0 }},
        {% endfor %}
    ];

    const data = {
        labels: etiquetas,
        datasets: [{
            label: 'Número de piezas por proveedor: ',
            data: datos,
            backgroundColor: [
                'rgba(255, 99, 132, 0.5)',
                'rgba(255, 159, 64, 0.5)',
                'rgba(255, 205, 86, 0.5)',
                'rgba(75, 192, 192, 0.5)',
                'rgba(54, 162, 235, 0.5)',
            ],
            borderColor: [
                'rgb(255, 99, 132)',
                'rgb(255, 159, 64)',
                'rgb(255, 205, 86)',
                'rgb(75, 192, 192)',
                'rgb(54, 162, 235)',
            ],
            borderWidth: 3,
        }],
    };

    const myBarChart = new Chart(document.querySelector(".my-bar-chart"), {
        type: "bar",
        data: data,
        options: {
            scales: {
                y: {
                    beginAtZero: true,
                },
            },
            borderWidth: 20,
            borderRadius: 8,
            hoverBorderWidth: 6,
            legend: {
                display: true,
                title: 'Número de piezas por proveedor: ',
            },
        },
    });
});

</script>

</main>
<footer class=" text-center mt-4" style="background-color: #f2f2f2;">
  <div class="row">

    <section style="padding: 23px;" class="titulos">
      © 2023 Copyright:
      <a style="color: #B7950B; text-decoration:underline;" href="https://www.lazzarmexico.com/" class="titulos">Lazzarmexico.com</a>
      
    </section>

  <div class="text-center titulos p-4 larger-text" style="background-color: rgba(11, 34, 101); font-size: 18px; background: linear-gradient(to top, #0B2265, #2586a6);">
      <p style="color: azure;">
          Respeto, Honestidad, Confianza, Responsabilidad, Lealtad
      </p>
  </div>
</footer>
{% endblock %}
